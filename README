This module provides an interface to Twitter API using OAuth authentication.

Step by step:

1. Install the package.

   From tarball:

     $ gauche-package install [-S root] Gauche-net-oauth-0.5.tgz

   From source:

     $ git clone git://github.com/mhayashi1120/Gauche-net-oauth.git
     $ cd Gauche-net-oauth
     $ ./DIST gen
     $ ./configure
     $ make
     $ make -s check
     $ [sudo] make install

   ('-S root' option or 'sudo' may be required if you want to install
   the package system-wide.)

2. Register your application at http://twitter.com/oauth_clients
   * Check 'Client' in the Application Type question.
   * No need to check 'Use Twitter for login' box.
   * Save "Consumer key" and "Consumer secret" shown in the next screen.

3. Let the user to grant access to his/her twitter account via your client.
   How to handle this depends on your client.  If you (application author)
   just want to grant your application to access *your* twitter account,
   there's a simple script net/twitauth.scm that handles the process.  Run
   it as 'gosh net/twitauth'.   (If you haven't installed the module,
   cd to Gauche-net-oauth and run 'gosh -I. net/twitauth').
   It asks you to type your application's consumer key and consumer secret.

     $ gosh net/twitauth
     Enter consumer key: XXXXXXXXXXXXXXXXXXX
     Enter consumer secret: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXx

   Then it shows an URL you should access by your browser.

     Open the following url and type in the shown PIN.
     https://api.twitter.com/oauth/authorize?oauth_token=XXXXXXXXXXXXXXXXXXX
     Input PIN: 

   The page asks you if you grant access to the applicatio or not.
   If you click "Accept", it shows 7-digit PIN.   Type that PIN
   into the above 'Input PIN' prompt.

   Then the script shows information necessary to access to your Twitter
   account.  Save them.

   (
    (consumer-key        . "XXXXXXXXXXXXXXXXXXXX")
    (consumer-secret     . "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")
    (access-token        . "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")
    (access-token-secret . "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")
   )

   NB: If you intend to distribute your application to others and allow
   them to grant the application's access to their Twitter account, you
   would want to have better UI.  You can design your interaction with
   twitter-authenticate-client procedure described below.


4. In your program, create a <twitter-cred> instance with the above
   information, and use it to call Twitter API.

    (define *cred* (make <twitter-cred>
                     :consumer-key "XXX.....XXX"
                     :consumer-secret "XXX.....XXX"
                     :access-token "XXX......XXX"
                     :access-token-secret "XXX.....XXX"))

    (twitter-update *cred* "Post from my application!")
   


Module API:

Some twitter API interface come with several flavors.  Procedures
suffixed by /sxml return SXML representation of the server response,
along the list of message headers.  They are for applications that
needs full access to the server response.  Procedures without suffix,
or different suffix, return more convenient values, so that the
caller won't need to scan SXML.

For instance, twitter-followers/sxml returns two values such as
the following (each result is truncated for conciseness):

  gosh> (twitter-followers/sxml cred :screen-name "chaton_gauche")
  (*TOP*
   (*PI* xml "version=\"1.0\" encoding=\"UTF-8\"")
   (ids (id "75017042") (id "5327762") (id "69605132") (id "151305186")
    (id "68190981") (id "18044198") (id "149962169") (id "114554818")
    (id "10967962") (id "14988077") (id "19059915") (id "37883768")
    (id "15674085") ....))
  (("date" "Mon, 07 Jun 2010 02:03:04 GMT")
   ("server" "hi")
   ("status" "200 OK")
   ("x-transaction" "1275876184-68906-26775")
   ("x-ratelimit-limit" "150")
   ("etag" "\"83b847f06bfe0338b8c62c85f39a8294\"")
   ....)

While twitter-followers/ids just returns a list of user ids:

  gosh> (twitter-followers/ids cred :screen-name "chaton_gauche")
  ("75017042" "5327762" "69605132" "151305186" "68190981" ...)

In both versions, if the server returns response other than 200,
a condition <twitter-api-error> is signalled.


[Module] net.oauth

TODO


Credits:

This module is based on the code brewed among several blogs.

By Saito Atsushi: http://d.hatena.ne.jp/SaitoAtsushi/20100429/1272545442
By tana-laevatein: http://d.hatena.ne.jp/tana-laevatein/20100505/1273025284
By sirocco634: http://d.hatena.ne.jp/sirocco634/20100605#1275743091


